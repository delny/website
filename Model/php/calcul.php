<?php  session_start();//fonction calul difference temps  function difftime($heure_debut)  {    $heure = date('H:i:s');        $timestamp = strtotime($heure);    $timestamp_debut = strtotime($heure_debut);        $difference = $timestamp - $timestamp_debut;        $s = $difference % 60;    $tmp = ($difference - $s) / 60;    $m = $tmp % 60;    $tmp = ($tmp - $m) / 60;    $h = $tmp % 24;        if ($h == 0) {      if ($m == 0) {        return $s . ' secondes';      } elseif ($m == 1) {        return $m . ' minute et ' . $s . ' secondes';      } else {        return $m . ' minutes et ' . $s . ' secondes';      }    } elseif ($h == 1) {      return $h . ' heure ' . $m . ' minutes et ' . $s . ' secondes';    } else {      return $h . ' heures ' . $m . ' minutes et ' . $s . ' secondes';    }      }    function randcalcul($op)  {    $a = rand(2, 10);    $b = rand(2, 10);        if ($op == 0) {      return [$a + $b, ' ' . $a . ' + ' . $b . ' ?'];    } elseif ($op == 1) {      $c = $a + $b;      return [$c - $b, ' ' . $c . ' - ' . $b . ' ?'];    } elseif ($op == 2) {      return [$a * $b, ' ' . $a . ' x ' . $b . ' ?'];    } elseif ($op == 3) {      $c = $a * $b;      return [$c / $b, ' ' . $c . ' / ' . $b . ' ?'];    }  }// on verif existance variables  if (isset($_POST['result'])) //second jeu : calcul  {    $result = $_POST['result'];    if ($result == 'go' AND isset($_POST['niveau']) AND isset($_POST['op'])) {      // on lance le jeu      $retour = randcalcul($_POST['op']);      $quizz = $retour[0];      $quizzp = $retour[1];      $_SESSION['quizz'] = $quizz;      $_SESSION['quizzp'] = $quizzp;      $_SESSION['toto'] = 0;      $_SESSION['score'] = 20;      $_SESSION['game_statut'] = 1;      $_SESSION['heure_debut'] = date('H:i:s');      $_SESSION['niveau'] = $_POST['niveau'];      $_SESSION['op'] = $_POST['op'];      echo $quizzp;    } elseif ($result == 'stop') {      //on stoppe le jeu      $heure_debut = $_SESSION['heure_debut'];      $timeplay = difftime($heure_debut);      $_SESSION['game_statut'] = 0;      $quizzp = 'Votre score est de ' . $_SESSION['score'] . ' sur 20 sur ' . $_SESSION['toto'] . ' calculs';      $quizzp .= ' en un temps de ' . $timeplay . '';      echo $quizzp;    } elseif (isset($_SESSION['game_statut']) && $_SESSION['game_statut'] == 1) {      // on verifie le score du joueur      if ($_SESSION['score'] > 0) {        // on verifie si le joueur a bon        $quizz = $_SESSION['quizz'];        if ($quizz == $result) {          $_SESSION['toto']++;          if ($_SESSION['toto'] < 20) {            $retour = randcalcul($_SESSION['op']);            $quizz = $retour[0];            $quizzp = $retour[1];            $_SESSION['quizz'] = $quizz;            $_SESSION['quizzp'] = $quizzp;          } else {            $heure_debut = $_SESSION['heure_debut'];            $timeplay = difftime($heure_debut);            $quizzp = 'Votre score est de ' . $_SESSION['score'] . ' sur 20';            $quizzp .= ' en un temps de ' . $timeplay . '';            $_SESSION['game_statut'] = 0;          }        } else {          $_SESSION['score'] = $_SESSION['score'] - 1;          $quizzp = $_SESSION['quizzp'];        }      } else {        $quizzp = 'Votre score est de ' . $_SESSION['score'] . ' sur 20';        $_SESSION['game_statut'] = 0;      }      echo $quizzp;    }  } elseif (isset($_POST['answers'], $_SESSION['niveau'])) {    if ($_SESSION['niveau'] == "niv0") {      $quizz = $_SESSION['quizz'];      $tab = [$quizz];      while (count($tab) < 3) {        $i = rand($quizz - 5, $quizz + 5);        if (!in_array($i, $tab)) {          array_push($tab, $i);        }      }      shuffle($tab);      $a = $tab[0];      $b = $tab[1];      $c = $tab[2];      echo '<div class="choice" onclick="sendanswer(' . $a . ');">' . $a . '</div>';      echo '<div class="choice" onclick="sendanswer(' . $b . ');">' . $b . '</div>';      echo '<div class="choice" onclick="sendanswer(' . $c . ');">' . $c . '</div>';    } else {      echo "FALSE";    }  } else // aucun des deux jeux  {    echo 'rien';  }  